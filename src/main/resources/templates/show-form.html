<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Show Form</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>
<body>
<div th:replace="~{fragments/navbar :: navbar}"></div>
<div th:replace="~{fragments/sidebar :: layout(~{::content})}">
    <div th:fragment="content" class="container-fluid">

        <!-- Page Header -->
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h3 class="mb-0" th:text="${show.id == null} ? 'Add Show' : 'Edit Show'"></h3>
        </div>

        <!-- Show Form -->
        <div class="card shadow-sm">
            <div class="card-body">
                <form th:action="${show.id == null} ? @{/admin/shows/new} : @{/admin/shows/edit/{id}(id=${show.id})}"
                      th:object="${show}" method="post" class="row g-3">

                    <!-- Select Movie -->
                    <div class="col-md-6">
                    <label class="form-label">Movie</label>
                    <select th:field="*{movie.id}" class="form-select" required>
                        <option value="" disabled th:selected="${show.movie == null}">-- Select Screen --</option>
                        <option th:each="movie : ${movies}"
                                th:value="${movie.id}"
                                th:text="${movie.title}">
                        </option>
                    </select>
                    <div class="text-danger small" th:if="${#fields.hasErrors('movie.id')}" th:errors="*{movie.id}"></div>
                </div>

                    <!-- Select Screen -->
                    <div class="col-md-6">
                        <label class="form-label">Screen</label>
                        <select th:field="*{screen.id}" class="form-select" required>
                            <option value="" disabled th:selected="${show.screen == null}">-- Select Screen --</option>
                            <option th:each="screen : ${screens}"
                                    th:value="${screen.id}"
                                    th:text="${screen.name + ' (' + screen.theater.name + ')'}">
                            </option>
                        </select>
                        <div class="text-danger small" th:if="${#fields.hasErrors('screen.id')}" th:errors="*{screen.id}"></div>
                    </div>

                    <!-- Show Time -->
                    <div class="col-md-6">
                        <label class="form-label">Show Time</label>
                        <input type="datetime-local" th:field="*{showTime}" class="form-control"/>
                        <div class="text-danger small" th:if="${#fields.hasErrors('showTime')}" th:errors="*{showTime}"></div>
                    </div>

                    <!-- Ticket Price -->
                    <div class="col-md-6">
                        <label class="form-label">Ticket Price</label>
                        <input type="number" step="0.5" th:field="*{ticketPrice}" placeholder="Ticket Price" class="form-control"/>
                        <div class="text-danger small" th:if="${#fields.hasErrors('ticketPrice')}" th:errors="*{ticketPrice}"></div>
                    </div>

                    <!-- Buttons -->
                    <div class="col-12 text-end">
                        <button type="submit" class="btn btn-success">
                            <i class="bi bi-check-circle"></i> Save
                        </button>
                        <a href="/admin/shows" class="btn btn-secondary">
                            <i class="bi bi-x-circle"></i> Cancel
                        </a>
                    </div>
                </form>
            </div>
        </div>

    </div>
</div>
</body>
</html>
